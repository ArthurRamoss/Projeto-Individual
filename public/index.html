<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>F1TECH | Página Inicial</title>

  <script src="./js/sessao.js"></script>

  <link rel="stylesheet" href="./css/estilo.css">
  <link rel="icon" href="./assets/icon/favicon2.ico">
  <link rel="preconnect" href="https://fonts.gstatic.com">
</head>

<body>
  <div class="header">
    <div class="container">
      <img src="./assets/imgs/logo.png">
      <ul class="navbar">
        <li class="agora">
          <a href="#">Inicial</a>
        </li>
        <li>
          <a href="ranking.html">Ranking</a>
        </li>
        <li>|</li>
        <li>
          <a href="login.html">Login</a>
        </li>
        <li>
          <a href="cadastro.html">Cadastro</a>
        </li>
      </ul>
    </div>
  </div>

  <div class="banner">
    <div class="container">
      <p>Nas pistas, o mundo se encontra: <br> <span>F1, o espetáculo global.</span></p>
      <a href="#history" class="buttonIndex">Quero conhecer mais sobre Fórmula 1!</a>
    </div>
  </div>

  <div class="history" id="history">
    <div class="container">
      <h2>História da Fórmula 1</h2>
      <div class="content">
        <div class="text">
          <p>A Fórmula 1 começou em 1950, com Giuseppe Farina vencendo o primeiro campeonato. Nos anos seguintes, Juan
            Manuel Fangio dominou, conquistando cinco títulos entre 1951 e 1957. A Ferrari teve destaque nos anos de
            1952 e 1953 com Alberto Ascari. Durante a década, a Fórmula 1 evoluiu tecnologicamente, com avanços
            significativos introduzidos por equipes como Mercedes-Benz, que deixou o esporte após a tragédia de Le Mans
            em 1955. Em 1958, Mike Hawthorn se tornou o primeiro campeão mundial britânico, e o Campeonato Mundial de
            Construtores foi introduzido, vencido pela Vanwall. A década também viu um aumento na conscientização sobre
            a segurança, levando a mudanças nas regulamentações. Esta primeira década estabeleceu a Fórmula 1 como o
            auge do automobilismo, combinando velocidade, inovação e rivalidades intensas.</p>
        </div>
        <div class="image">
          <img src="assets/imgs/f11950.jpeg" alt="Primeira versão dos carros em 1950">
        </div>
      </div>
      <div class="content">
        <div class="image">
          <img src="assets/imgs/f11960.jpg" alt="Carro da lotus em 1965">
        </div>
        <div class="text">
          <p>A década de 1960 trouxe grandes mudanças para a Fórmula 1. A transição para motores traseiros foi
            consolidada, e Phil Hill se tornou o primeiro campeão mundial dos EUA em 1961. A Lotus, liderada por Colin
            Chapman, revolucionou o design dos carros, e Jim Clark venceu dois campeonatos (1963 e 1965). Em 1966, os
            motores de 3 litros retornaram, e Jack Brabham venceu com seu próprio carro. A segurança ganhou foco após
            vários acidentes fatais, levando a melhorias nos cockpits e combustíveis. Em 1968, asas aerodinâmicas e
            publicidade foram introduzidas, mudando o esporte. Jackie Stewart conquistou seu primeiro título em 1969 e
            foi um defensor da segurança. A década foi crucial para a evolução tecnológica e a segurança na Fórmula 1.
          </p>
        </div>
      </div>
      <div class="content">
        <div class="text">
          <p>A década de 1970 na Fórmula 1 foi marcada por grandes mudanças e tragédias. Jochen Rindt se tornou o único
            campeão póstumo em 1970, destacando a necessidade de melhorias na segurança. Emerson Fittipaldi brilhou,
            vencendo campeonatos em 1972 e 1974. Niki Lauda, venceu títulos em 1975 e após um grave acidente em 1976,
            ganhou o titulo de 1977. A Lotus introduziu o efeito solo em 1978, revolucionando a aerodinâmica.
            Tragicamente, Ronnie Peterson morreu em 1978, levando a novas medidas de segurança. Jody Scheckter
            conquistou o campeonato de 1979 pela Ferrari. A década foi crucial para avanços tecnológicos e o foco na
            segurança, consolidando a Fórmula 1 como um esporte de alta competição e inovação.</p>
        </div>
        <div class="image">
          <img src="assets/imgs/f11970.jpg" alt="Niki lauda no carro da ferrari em 1976">
        </div>
      </div>
      <div class="content">
        <div class="image">
          <img src="assets/imgs/f11980.webp" alt="Senna no carro da McLaren em 1983">
        </div>
        <div class="text">
          <p>Na década de 1980, a Fórmula 1 testemunhou avanços tecnológicos e rivalidades intensas. Alan Jones e Nelson
            Piquet dominaram em 1980 e 1981, seguidos pelo surgimento de Alain Prost, vencendo em 1985. A temporada de
            1982 foi marcada por tragédias, mas Keke Rosberg conquistou o título. Prost e sua rivalidade com Ayrton
            Senna dominaram o final dos anos 80, com Senna vencendo em 1988 e Prost em 1989. Essa década foi
            caracterizada por uma mistura de inovação tecnológica e batalhas emocionantes nas pistas, solidificando a
            Fórmula 1 como um esporte global de alta competição.</p>
        </div>
      </div>
      <div class="content">
        <div class="text">
          <p>Na década de 1990, a Fórmula 1 foi palco de rivalidades épicas e dominância de alguns dos maiores pilotos
            da história. Ayrton Senna e Alain Prost protagonizaram uma das rivalidades mais intensas, com Senna vencendo
            em 1990 e 1991. Michael Schumacher emergiu como uma força dominante, conquistando títulos em 1994 e 1995
            pela Benetton e em 1997 pela Ferrari. A McLaren, liderada por Mika Häkkinen, dominou em 1998 e 1999. Em
            2000, Schumacher conquistou seu primeiro título com a Ferrari, marcando o início de uma era de domínio
            consecutivo.</p>
        </div>
        <div class="image">
          <img src="assets/imgs/f11990.jpg" alt="Carro da ferrari de 1990, o f1-90 641">
        </div>
      </div>
      <div class="content">
        <div class="image">
          <img src="assets/imgs/f12005.jpg" alt="Fernando alonso em 2005 no carro da Renault">
        </div>
        <div class="text">
          <p>Na primeira década do século XXI, a Fórmula 1 testemunhou o domínio de Michael Schumacher e Ferrari, com
            cinco títulos consecutivos de 2000 a 2004. Fernando Alonso interrompeu essa sequência, conquistando dois
            títulos com a Renault em 2005 e 2006. A temporada de 2007 foi marcada por uma intensa batalha entre McLaren
            e Ferrari, com Kimi Räikkönen emergindo como campeão. Lewis Hamilton conquistou seu primeiro título em 2008,
            enquanto a Brawn GP surpreendeu ao vencer em 2009 com Jenson Button. A temporada de 2010 foi notável pela
            disputa acirrada até a última corrida, com Sebastian Vettel emergindo como campeão.</p>
        </div>
      </div>
      <div class="content">
        <div class="text">
          <p>A partir de 2010, a Fórmula 1 testemunhou o domínio inicial de Sebastian Vettel e Red Bull, seguido pela
            ascensão da Mercedes como equipe dominante a partir de 2014. Lewis Hamilton e Nico Rosberg travaram uma
            intensa rivalidade dentro da equipe, com Hamilton conquistando seis títulos mundiais entre 2014 e 2019. A
            temporada de 2020 foi marcada pela pandemia de COVID-19, resultando em um calendário revisado e o sétimo
            título de Hamilton, igualando o recorde de Michael Schumacher. Essa década foi caracterizada por mudanças
            tecnológicas, rivalidades intensas e a consolidação de Hamilton como um dos maiores pilotos da história. O
            período também representou uma transição para regulamentos ecológicos e iniciativas de sustentabilidade na
            Fórmula 1</p>
        </div>
        <div class="image">
          <img src="assets/imgs/f12017.jpg" alt="Hamilton em 2017 em sua dominancia">
        </div>
      </div>
      <div class="content">
        <div class="image">
          <img src="assets/imgs/f12022.jpg" alt="Carro de 2022 utilizado por Max Verstappen">
        </div>
        <div class="text">
          <p>Na temporada de 2020, a pandemia de COVID-19 resultou em ajustes no calendário, mas Lewis Hamilton
            conquistou seu sétimo título, igualando Schumacher. Em 2021, a Red Bull e Max Verstappen desafiaram a
            Mercedes, com Verstappen vencendo seu primeiro título em Abu Dhabi. 2022 viu novas regulamentações técnicas
            e uma luta acirrada entre Verstappen e Hamilton, com Verstappen emergindo como campeão. Em 2023, Verstappen
            defendeu com sucesso seu título em meio a uma competição feroz, e todas as equipes mantiveram suas duplas de
            pilotos. Esses anos foram marcados por batalhas emocionantes e um equilíbrio cada vez maior entre as equipes
            líderes.</p>
        </div>
      </div>
    </div>
  </div>

  <div class="entre-secoes">
    <a href="#equipe-template" class="buttonIndex">Quero conhecer as equipes!</a>
  </div>

  <div id="equipe-template" class="section equipe">
  </div>

  <div class="entre-secoes">
    <a href="#piloto-template" class="buttonIndex">Quero conhecer os pilotos!</a>
  </div>

  <div id="piloto-template" class="section piloto">
  </div>

  <div class="footer">
    <div class="container">
      <h4>Feito por Arthur Ramos &hearts; SPTech &copy; 2024</h4>
      <span class="version">v1.0.0</span>
    </div>
  </div>

</body>

</html>

<script>


  document.addEventListener("DOMContentLoaded", async function () {
    try {
      // Chama as funções de listagem de pilotos e equipes e espera que ambas sejam concluídas
      await Promise.all([listarPilotos(), listarEquipes()]);

      // Após ambas as listas estarem preenchidas, preenche o template
      preencherTemplate();
      preencherEquipes();
    } catch (error) {
      console.error("Erro ao carregar dados:", error);
    }

    // Adiciona o comportamento de scroll suave aos links
    const links = document.querySelectorAll('a[href*="#"]');

    links.forEach(link => {
      link.addEventListener('click', function (e) {
        e.preventDefault();
        const targetId = this.getAttribute('href');
        const targetElement = document.querySelector(targetId);

        if (targetElement) {
          targetElement.scrollIntoView({
            behavior: 'smooth'
          });
        }
      });
    });
  });

  let equipesData = {};

  function listarEquipes() {
    return fetch("/equipe/listarEquipe", {
      method: "GET",
    })
      .then(function (resposta) {
        return resposta.json();
      })
      .then((equipes) => {
        equipes.forEach((equipe) => {
          // Armazenar as informações das equipes em um objeto usando o ID da equipe como chave
          equipesData[equipe.idEquipe] = equipe;
        });
      })
      .catch(function (erro) {
        console.error(`#ERRO: ${erro}`);
      });
  }

  let pilotosData = [];

  function listarPilotos() {
    return fetch('/piloto/listarPiloto', {
      method: 'GET',
    })
      .then(function (resposta) {
        return resposta.json();
      })
      .then((pilotos) => {
        pilotosData = pilotos;
      })
      .catch(function (resposta) {
        console.log(`#ERRO: ${resposta}`);
      });
  }

  function formatarData(data) {
    // Função para formatar a data no formato desejado (XX/xx/xx)
    const dataObj = new Date(data);
    const dia = dataObj.getDate().toString().padStart(2, '0');
    const mes = (dataObj.getMonth() + 1).toString().padStart(2, '0');
    const ano = dataObj.getFullYear().toString();
    return `${dia}/${mes}/${ano}`;
  }

  function preencherTemplate() {
    const pilotoContainer = document.getElementById('piloto-template');
    pilotoContainer.innerHTML = ''; // Limpa o conteúdo do template

    pilotosData.forEach((piloto) => {
      // Verificar se o piloto tem uma equipe atribuída (fkEquipe)
      if (piloto.fkEquipe) {
        const equipe = equipesData[piloto.fkEquipe]; // Recupera os dados da equipe correspondente
        const pilotoDiv = document.createElement('div');
        pilotoDiv.classList.add('container');
        pilotoDiv.innerHTML = `
            <div class="content" id="piloto_${piloto.idPiloto}">
                    <div class="info">
                        <h2>${piloto.nome}</h2>
                        <p><strong>Data de nascimento:</strong> ${formatarData(piloto.dataNasc)}</p>
                        <p><strong>Numero:</strong> ${piloto.NumPiloto}</p>
                        <a href="#equipe_${equipe.idEquipe}"><p><strong>Equipe Atual:</strong> ${equipe.nome}</p></a>
                        <p><strong>Títulos:</strong> ${piloto.titulos || 0}</p>
                    </div>
                    <div class="img-container">
                        <img src="${piloto.imgPiloto}" class="img-piloto">
                        <div class="images">
                            <img src="${piloto.imgNumPiloto}" class="logo-numero">
                            <a href="#equipe_${equipe.idEquipe}"><img src="${equipe.logo}" class="logo-equipe"></a>
                        </div>
                    </div>
                </div>
                <div class="historia">
                    <p><strong>História:</strong></p>
                    <p>${piloto.historia}</p>
                </div>
            `;
        pilotoContainer.appendChild(pilotoDiv);
      }
    });
  }

  function preencherEquipes() {
    const equipeContainer = document.getElementById('equipe-template');
    equipeContainer.innerHTML = ''; // Limpa o conteúdo do template

    Object.values(equipesData).forEach((equipe) => {
      const pilotosDaEquipe = pilotosData.filter(piloto => piloto.fkEquipe === equipe.idEquipe);
      const equipeDiv = document.createElement('div');
      equipeDiv.classList.add('container');
      equipeDiv.classList.add(equipe.idEquipe % 2 === 0 ? 'par' : 'impar');
      equipeDiv.innerHTML = `
        <h2 id="equipe_${equipe.idEquipe}" class="section equipe">${equipe.nome}</h2>
        <img src="${equipe.logo}" class="logo-equipe">
        <div class="pilotos">
          ${pilotosDaEquipe.map(piloto => `
            <a href="#piloto_${piloto.idPiloto}">
              <div class="piloto">
                <p>${piloto.nome}</p>
                <img src="${piloto.imgPiloto}" class="img-piloto">
              </div>
            </a>
          `).join('')}
        </div>  
        <div class="carro">
          <img src="${equipe.imgCarro}">
        </div>
        <div class="mostrar-historia">
          <p>Conheça mais sobre a história da ${equipe.nome}</p>
          <img src="./assets/imgs/setaBaixo.png">
        </div>
        <div class="historia equipe" style="display: none;">
          <p><strong>História da Equipe:</strong></p>
          <p>${equipe.historia}</p>
        </div>

      `;
      equipeContainer.appendChild(equipeDiv);

      const mostrarHistoriaBtn = equipeDiv.querySelector('.mostrar-historia');
      const historiaEquipe = equipeDiv.querySelector('.historia');
      const setaImg = mostrarHistoriaBtn.querySelector('img');

      mostrarHistoriaBtn.addEventListener('click', () => {
        if (historiaEquipe.style.display === 'none') {
          historiaEquipe.style.display = 'block';
          setaImg.src = './assets/imgs/setaCima.png';
        } else {
          historiaEquipe.style.display = 'none';
          setaImg.src = './assets/imgs/setaBaixo.png';
        }
      });
    });
  }
</script>